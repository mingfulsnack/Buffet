# ğŸ½ï¸ Buffet Restaurant Management System

Há»‡ thá»‘ng quáº£n lÃ½ nhÃ  hÃ ng buffet hoÃ n chá»‰nh vá»›i backend API vÃ  frontend React, há»— trá»£ Ä‘áº·t bÃ n online, quáº£n lÃ½ thá»±c Ä‘Æ¡n, Ä‘Æ¡n hÃ ng, hÃ³a Ä‘Æ¡n vÃ  bÃ¡o cÃ¡o thá»‘ng kÃª.

## ğŸš€ TÃ­nh nÄƒng chÃ­nh

### ğŸ”“ Chá»©c nÄƒng cÃ´ng khai (KhÃ´ng cáº§n Ä‘Äƒng nháº­p)

- **Xem thá»±c Ä‘Æ¡n**: Danh sÃ¡ch mÃ³n Äƒn vÃ  set buffet vá»›i giÃ¡
- **Äáº·t bÃ n trá»±c tuyáº¿n**: Form Ä‘áº·t bÃ n vá»›i token Ä‘á»ƒ quáº£n lÃ½
- **Kiá»ƒm tra Ä‘áº·t bÃ n**: Xem vÃ  há»§y Ä‘áº·t bÃ n báº±ng token
- **Xem bÃ n trá»‘ng**: SÆ¡ Ä‘á»“ bÃ n theo khu vá»±c vÃ  tráº¡ng thÃ¡i

### ğŸ” Chá»©c nÄƒng quáº£n trá»‹ (Cáº§n Ä‘Äƒng nháº­p)

- **Dashboard**: Biá»ƒu Ä‘á»“ doanh thu, thá»‘ng kÃª tá»•ng quan vá»›i Chart.js
- **Quáº£n lÃ½ Ä‘áº·t bÃ n**: XÃ¡c nháº­n, há»§y Ä‘áº·t bÃ n vá»›i toast notification
- **Quáº£n lÃ½ bÃ n Äƒn**: CRUD bÃ n theo khu vá»±c, cáº­p nháº­t tráº¡ng thÃ¡i real-time
- **Quáº£n lÃ½ thá»±c Ä‘Æ¡n**: CRUD mÃ³n Äƒn, danh má»¥c, set buffet, khuyáº¿n mÃ£i
- **Quáº£n lÃ½ khÃ¡ch hÃ ng**: ThÃ´ng tin, lá»‹ch sá»­, chÆ°Æ¡ng trÃ¬nh thÃ nh viÃªn
- **Quáº£n lÃ½ nhÃ¢n viÃªn**: CRUD nhÃ¢n viÃªn, vai trÃ², phÃ¢n quyá»n há»‡ thá»‘ng
- **Quáº£n lÃ½ Ä‘Æ¡n hÃ ng**: Táº¡o Ä‘Æ¡n hÃ ng vá»›i chi tiáº¿t mÃ³n Äƒn, xÃ¡c nháº­n táº¡o hÃ³a Ä‘Æ¡n
- **Quáº£n lÃ½ hÃ³a Ä‘Æ¡n**: Cáº­p nháº­t tráº¡ng thÃ¡i thanh toÃ¡n, thá»‘ng kÃª
- **BÃ¡o cÃ¡o thá»‘ng kÃª**: Doanh thu theo ngÃ y/thÃ¡ng/nÄƒm, hiá»‡u suáº¥t bÃ n

### ğŸ¨ Giao diá»‡n & UX

- **React 19**: UI framework hiá»‡n Ä‘áº¡i vá»›i hooks vÃ  context
- **Toast Notifications**: ThÃ´ng bÃ¡o thÃ nh cÃ´ng/lá»—i cho má»i action
- **Loading States**: Hiá»‡u á»©ng loading khi xá»­ lÃ½ dá»¯ liá»‡u
- **Form Validation**: Kiá»ƒm tra dá»¯ liá»‡u frontend + backend vá»›i toast hiá»ƒn thá»‹
- **Responsive Design**: TÆ°Æ¡ng thÃ­ch mobile, tablet
- **Modern UI**: Layout sidebar + header cá»‘ Ä‘á»‹nh vá»›i SCSS

### ğŸ”’ Báº£o máº­t & PhÃ¢n quyá»n

- **JWT Authentication**: Access token vá»›i auto-refresh
- **Role-based Access**: Admin, Manager, Staff vá»›i quyá»n khÃ¡c nhau
- **Protected Routes**: Frontend routes báº£o vá»‡ theo vai trÃ²
- **Rate Limiting**: Giá»›i háº¡n API calls, input validation
- **Security Headers**: Helmet, CORS, XSS protection

## ï¿½ï¸ CÃ´ng nghá»‡ sá»­ dá»¥ng

### Backend

- **Node.js** >= 16.x - JavaScript runtime
- **Express.js** - Web framework
- **PostgreSQL** >= 12.x - Database
- **JWT** - Authentication & authorization
- **Joi** - Data validation
- **Helmet** - Security middleware
- **Rate Limiting** - API protection

### Frontend

- **React 19** - UI Framework hiá»‡n Ä‘áº¡i
- **Vite** - Build tool & dev server nhanh
- **React Router DOM** - Client-side routing
- **React Toastify** - Toast notification system
- **Chart.js + React-Chartjs-2** - Data visualization
- **SCSS/Sass** - Advanced styling vá»›i variables
- **React Icons** - Icon library
- **Axios** - HTTP client vá»›i interceptors

## ï¿½ğŸ“‹ YÃªu cáº§u há»‡ thá»‘ng

- Node.js >= 16.x
- PostgreSQL >= 12.x
- npm hoáº·c yarn

## ğŸ› ï¸ CÃ i Ä‘áº·t

### 1. Clone dá»± Ã¡n

```bash
git clone <repository-url>
cd buffet
```

### 2. CÃ i Ä‘áº·t Backend

```bash
# CÃ i Ä‘áº·t dependencies cho backend
npm install
```

### 3. CÃ i Ä‘áº·t Frontend

```bash
# Di chuyá»ƒn vÃ o thÆ° má»¥c frontend vÃ  cÃ i Ä‘áº·t
cd fe
npm install
cd ..
```

### 4. Cáº¥u hÃ¬nh database

- Táº¡o database PostgreSQL vá»›i tÃªn `buffet_restaurant`
- Cháº¡y script SQL Ä‘á»ƒ táº¡o báº£ng: `scripts/init-data.sql`

### 5. Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng

#### Backend (.env)

Táº¡o file `.env` á»Ÿ thÆ° má»¥c gá»‘c:

```env
# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=buffet_restaurant
DB_USER=postgres
DB_PASSWORD=your_password

# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_here
JWT_EXPIRES_IN=7d

# Server Configuration
PORT=3000
NODE_ENV=development
```

#### Frontend (fe/.env)

Táº¡o file `.env` trong thÆ° má»¥c `fe/`:

```env
VITE_API_URL=http://localhost:3000/api
```

### 6. Cháº¡y á»©ng dá»¥ng

#### CÃ¡ch 1: Cháº¡y riÃªng biá»‡t

```bash
# Terminal 1: Backend (tá»« thÆ° má»¥c root)
npm start
# hoáº·c
node server.js

# Terminal 2: Frontend
cd fe
npm run dev
```

#### CÃ¡ch 2: Cháº¡y cÃ¹ng lÃºc (náº¿u cÃ³ concurrently)

```bash
npm run dev
```

### 7. Truy cáº­p á»©ng dá»¥ng

- **Backend API**: http://localhost:3000
- **Frontend**: http://localhost:5173
- **API Documentation**: http://localhost:3000/api

## ğŸ—ï¸ Cáº¥u trÃºc dá»± Ã¡n

```
buffet/
â”œâ”€â”€ backend (root)/
â”‚   â”œâ”€â”€ server.js              # Entry point
â”‚   â”œâ”€â”€ package.json           # Backend dependencies
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ database.js        # Database config
â”‚   â”œâ”€â”€ controllers/           # Business logic
â”‚   â”‚   â”œâ”€â”€ authController.js  # Authentication
â”‚   â”‚   â”œâ”€â”€ bookingController.js # Booking management
â”‚   â”‚   â”œâ”€â”€ customerController.js # Customer CRUD
â”‚   â”‚   â”œâ”€â”€ employeeController.js # Employee & roles
â”‚   â”‚   â”œâ”€â”€ menuController.js    # Menu & categories
â”‚   â”‚   â”œâ”€â”€ tableController.js   # Tables & areas
â”‚   â”‚   â”œâ”€â”€ orderController.js   # Order management
â”‚   â”‚   â”œâ”€â”€ invoiceController.js # Invoice tracking
â”‚   â”‚   â””â”€â”€ reportController.js  # Analytics & reports
â”‚   â”œâ”€â”€ models/                # Data models
â”‚   â”‚   â”œâ”€â”€ BaseModel.js       # Base CRUD operations
â”‚   â”‚   â”œâ”€â”€ Employee.js        # Employee model
â”‚   â”‚   â”œâ”€â”€ Customer.js        # Customer model
â”‚   â”‚   â”œâ”€â”€ Table.js          # Table model
â”‚   â”‚   â”œâ”€â”€ Booking.js        # Booking model
â”‚   â”‚   â”œâ”€â”€ Menu.js           # Menu model
â”‚   â”‚   â””â”€â”€ index.js          # Model exports
â”‚   â”œâ”€â”€ routes/               # API routes
â”‚   â”‚   â”œâ”€â”€ auth.js           # /api/auth/*
â”‚   â”‚   â”œâ”€â”€ public.js         # /api/public/*
â”‚   â”‚   â”œâ”€â”€ bookings.js       # /api/bookings/*
â”‚   â”‚   â”œâ”€â”€ tables.js         # /api/tables/*
â”‚   â”‚   â”œâ”€â”€ menu.js           # /api/menu/*
â”‚   â”‚   â”œâ”€â”€ customers.js      # /api/customers/*
â”‚   â”‚   â”œâ”€â”€ employees.js      # /api/employees/*
â”‚   â”‚   â”œâ”€â”€ orderRoutes.js    # /api/orders/*
â”‚   â”‚   â”œâ”€â”€ invoices.js       # /api/invoices/*
â”‚   â”‚   â””â”€â”€ reports.js        # /api/reports/*
â”‚   â”œâ”€â”€ middleware/           # Express middleware
â”‚   â”‚   â”œâ”€â”€ auth.js          # JWT & role checking
â”‚   â”‚   â”œâ”€â”€ validation.js    # Joi schemas
â”‚   â”‚   â””â”€â”€ upload.js        # File upload
â”‚   â”œâ”€â”€ utils/               # Utilities
â”‚   â”‚   â””â”€â”€ helpers.js       # Response formatting
â”‚   â””â”€â”€ scripts/             # Database scripts
â”‚       â””â”€â”€ init-data.sql    # Initial database setup
â”‚
â”œâ”€â”€ fe/                      # Frontend React app
â”‚   â”œâ”€â”€ package.json         # Frontend dependencies
â”‚   â”œâ”€â”€ vite.config.js      # Vite configuration
â”‚   â”œâ”€â”€ index.html          # HTML template
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.jsx        # App entry point
â”‚   â”‚   â”œâ”€â”€ App.jsx         # Root component vá»›i ToastContainer
â”‚   â”‚   â”œâ”€â”€ components/     # Reusable components
â”‚   â”‚   â”‚   â”œâ”€â”€ Header.jsx  # Header vá»›i auth info
â”‚   â”‚   â”‚   â””â”€â”€ Sidebar.jsx # Navigation sidebar
â”‚   â”‚   â”œâ”€â”€ context/        # React Context
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.jsx # Authentication state
â”‚   â”‚   â”œâ”€â”€ layouts/        # Layout components
â”‚   â”‚   â”‚   â””â”€â”€ AppLayout.jsx # Main app layout
â”‚   â”‚   â”œâ”€â”€ pages/          # Page components
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.jsx        # Login page
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.jsx    # Main dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ MenuPage.jsx     # Public menu view
â”‚   â”‚   â”‚   â”œâ”€â”€ BookingPage.jsx  # Public booking form
â”‚   â”‚   â”‚   â”œâ”€â”€ TablesPage.jsx   # Table management
â”‚   â”‚   â”‚   â”œâ”€â”€ OrdersPage.jsx   # Order management
â”‚   â”‚   â”‚   â”œâ”€â”€ InvoicesPage.jsx # Invoice management
â”‚   â”‚   â”‚   â””â”€â”€ ReportsPage.jsx  # Analytics & reports
â”‚   â”‚   â”œâ”€â”€ services/       # API integration
â”‚   â”‚   â”‚   â””â”€â”€ api.js      # Axios instance & API calls
â”‚   â”‚   â”œâ”€â”€ utils/          # Frontend utilities
â”‚   â”‚   â”‚   â””â”€â”€ toast.js    # Toast notification helpers
â”‚   â”‚   â””â”€â”€ styles/         # Global styles
â”‚   â”‚       â”œâ”€â”€ variables.scss # SCSS variables
â”‚   â”‚       â””â”€â”€ globals.scss   # Global styles
â”‚   â””â”€â”€ public/             # Static assets
â”‚       â””â”€â”€ images/         # Images (logo, backgrounds)
```

## ğŸ“š API Documentation

### Base URL

```
http://localhost:3000/api
```

### Authentication

Sá»­ dá»¥ng JWT token trong header:

```
Authorization: Bearer <token>
```

### TÃ i khoáº£n test

```
Username: admin
Password: admin123
Role: Admin (full access)
```

### API Endpoints

#### ğŸ”“ Public APIs (khÃ´ng cáº§n Ä‘Äƒng nháº­p)

```bash
# Xem thá»±c Ä‘Æ¡n cÃ´ng khai
GET /api/public/menu

# Xem bÃ n trá»‘ng vÃ  khu vá»±c
GET /api/public/tables
GET /api/public/areas

# Äáº·t bÃ n (khÃ¡ch hÃ ng)
POST /api/public/bookings

# Kiá»ƒm tra Ä‘áº·t bÃ n báº±ng token
GET /api/public/bookings/:token

# Há»§y Ä‘áº·t bÃ n báº±ng token
PUT /api/public/bookings/:token/cancel
```

#### ğŸ” Auth APIs

```bash
# ÄÄƒng nháº­p
POST /api/auth/login

# Láº¥y thÃ´ng tin profile
GET /api/auth/profile

# Äá»•i máº­t kháº©u
PUT /api/auth/change-password
```

#### ğŸ“‹ Booking Management APIs (Admin/Manager/Staff)

```bash
# Láº¥y danh sÃ¡ch Ä‘áº·t bÃ n
GET /api/bookings

# Chi tiáº¿t Ä‘áº·t bÃ n
GET /api/bookings/:id

# XÃ¡c nháº­n Ä‘áº·t bÃ n
PUT /api/bookings/:id/confirm

# Há»§y Ä‘áº·t bÃ n (admin)
PUT /api/bookings/:id/cancel
```

#### ğŸª‘ Table Management APIs

```bash
# Danh sÃ¡ch bÃ n theo khu vá»±c
GET /api/tables

# Chi tiáº¿t bÃ n vá»›i lá»‹ch sá»­
GET /api/tables/:id

# Táº¡o bÃ n má»›i
POST /api/tables

# Cáº­p nháº­t thÃ´ng tin bÃ n
PUT /api/tables/:id

# Cáº­p nháº­t tráº¡ng thÃ¡i bÃ n
PUT /api/tables/:id/status

# XÃ³a bÃ n
DELETE /api/tables/:id

# Quáº£n lÃ½ khu vá»±c/vÃ¹ng
GET /api/tables/areas
POST /api/tables/areas
```

#### ğŸ½ï¸ Menu Management APIs

```bash
# Danh sÃ¡ch mÃ³n Äƒn (admin)
GET /api/menu/dishes
POST /api/menu/dishes
PUT /api/menu/dishes/:id
DELETE /api/menu/dishes/:id

# Quáº£n lÃ½ danh má»¥c
GET /api/menu/categories
POST /api/menu/categories

# Set buffet
GET /api/menu/buffet-sets
POST /api/menu/buffet-sets
PUT /api/menu/buffet-sets/:id
DELETE /api/menu/buffet-sets/:id

# Khuyáº¿n mÃ£i
GET /api/menu/promotions
POST /api/menu/promotions
```

#### ğŸ‘¥ Customer Management APIs

```bash
# Danh sÃ¡ch khÃ¡ch hÃ ng
GET /api/customers

# Táº¡o khÃ¡ch hÃ ng má»›i
POST /api/customers

# Cáº­p nháº­t khÃ¡ch hÃ ng
PUT /api/customers/:id

# XÃ³a khÃ¡ch hÃ ng
DELETE /api/customers/:id

# TÃ¬m theo sá»‘ Ä‘iá»‡n thoáº¡i
GET /api/customers/phone/:phone

# Quáº£n lÃ½ háº¡ng thÃ nh viÃªn
GET /api/customers/membership/tiers
POST /api/customers/membership/tiers
```

#### ğŸ‘¨â€ğŸ’¼ Employee Management APIs

```bash
# Danh sÃ¡ch nhÃ¢n viÃªn
GET /api/employees

# Chi tiáº¿t nhÃ¢n viÃªn
GET /api/employees/:id

# Táº¡o nhÃ¢n viÃªn má»›i
POST /api/employees

# Cáº­p nháº­t nhÃ¢n viÃªn
PUT /api/employees/:id

# Reset máº­t kháº©u nhÃ¢n viÃªn
PUT /api/employees/:id/reset-password

# XÃ³a nhÃ¢n viÃªn
DELETE /api/employees/:id

# Quáº£n lÃ½ vai trÃ²
GET /api/employees/roles
POST /api/employees/roles

# Quáº£n lÃ½ quyá»n
GET /api/employees/permissions
POST /api/employees/permissions
PUT /api/employees/roles/:id/permissions
```

#### ğŸ›’ Order Management APIs

```bash
# Danh sÃ¡ch Ä‘Æ¡n hÃ ng
GET /api/orders

# Láº¥y menu Ä‘á»ƒ táº¡o Ä‘Æ¡n
GET /api/orders/menu

# Chi tiáº¿t Ä‘Æ¡n hÃ ng
GET /api/orders/:id

# Táº¡o Ä‘Æ¡n hÃ ng má»›i
POST /api/orders

# Cáº­p nháº­t Ä‘Æ¡n hÃ ng (thÃªm/bá»›t mÃ³n)
PUT /api/orders/:id

# XÃ³a Ä‘Æ¡n hÃ ng
DELETE /api/orders/:id

# XÃ¡c nháº­n Ä‘Æ¡n hÃ ng (táº¡o hÃ³a Ä‘Æ¡n)
POST /api/orders/:id/confirm
```

#### ğŸ§¾ Invoice Management APIs

```bash
# Danh sÃ¡ch hÃ³a Ä‘Æ¡n
GET /api/invoices

# Chi tiáº¿t hÃ³a Ä‘Æ¡n
GET /api/invoices/:id

# Cáº­p nháº­t tráº¡ng thÃ¡i thanh toÃ¡n
PATCH /api/invoices/:id/payment-status

# Cáº­p nháº­t hÃ³a Ä‘Æ¡n
PUT /api/invoices/:id

# Thá»‘ng kÃª hÃ³a Ä‘Æ¡n
GET /api/invoices/stats
```

#### ğŸ“Š Reports & Analytics APIs

```bash
# Doanh thu theo ngÃ y/thÃ¡ng/nÄƒm
GET /api/reports/revenue/daily
GET /api/reports/revenue/monthly
GET /api/reports/revenue/yearly

# Thá»‘ng kÃª tá»•ng quan
GET /api/reports/stats/overall

# Top ngÃ y cÃ³ doanh thu cao
GET /api/reports/stats/top-revenue-days

# BÃ¡o cÃ¡o theo tráº¡ng thÃ¡i thanh toÃ¡n
GET /api/reports/stats/payment-status
```

### Request/Response Format

#### Success Response

```json
{
  "success": true,
  "message": "Success message",
  "data": {
    // Response data
  },
  "meta": {
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 100,
      "totalPages": 10
    }
  }
}
```

#### Error Response

```json
{
  "success": false,
  "message": "Error message",
  "details": ["Validation errors..."]
}
```

### API Examples

#### Táº¡o Ä‘Æ¡n hÃ ng má»›i

```bash
POST /api/orders
Content-Type: application/json
Authorization: Bearer <token>

{
  "maban": 5,
  "ghichu": "KhÃ¡ch VIP",
  "items": [
    {
      "id": 1,
      "type": "monan",
      "name": "Thá»‹t nÆ°á»›ng",
      "price": 150000,
      "soluong": 2
    },
    {
      "id": 2,
      "type": "setbuffet",
      "name": "Set Buffet Premium",
      "price": 199000,
      "soluong": 1
    }
  ]
}
```

#### Response táº¡o Ä‘Æ¡n hÃ ng

```json
{
  "success": true,
  "message": "Táº¡o Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng",
  "data": {
    "madonhang": 123,
    "maban": 5,
    "tongtien": 499000,
    "trangthai": "Äang xá»­ lÃ½",
    "items": [...]
  }
}
```

## ğŸ¨ Frontend Features & Usage

### Toast Notification System

á»¨ng dá»¥ng sá»­ dá»¥ng React Toastify Ä‘á»ƒ hiá»ƒn thá»‹ thÃ´ng bÃ¡o user-friendly:

```javascript
// Import toast utilities
import {
  showSuccess,
  showError,
  showLoadingToast,
  showValidationError,
} from '../utils/toast';

// Success notification
showSuccess('ÄÆ¡n hÃ ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng!');

// Error notification
showError('CÃ³ lá»—i xáº£y ra khi xÃ³a mÃ³n Äƒn');

// Loading notification vá»›i promise
showLoadingToast(apiCall(), {
  pending: 'Äang xá»­ lÃ½...',
  success: 'ThÃ nh cÃ´ng!',
  error: 'CÃ³ lá»—i xáº£y ra!',
});

// Backend validation errors
showValidationError(error.response);
```

### Chá»©c nÄƒng chÃ­nh Frontend

#### ğŸ  Dashboard

- Biá»ƒu Ä‘á»“ doanh thu theo thÃ¡ng (Chart.js)
- Thá»‘ng kÃª tá»•ng quan (Ä‘Æ¡n hÃ ng, khÃ¡ch hÃ ng, doanh thu)
- Widget tráº¡ng thÃ¡i bÃ n real-time
- Quick actions cho cÃ¡c tÃ¡c vá»¥ thÆ°á»ng dÃ¹ng

#### ğŸ½ï¸ Quáº£n lÃ½ thá»±c Ä‘Æ¡n

- CRUD mÃ³n Äƒn vá»›i upload hÃ¬nh áº£nh
- Quáº£n lÃ½ danh má»¥c vÃ  set buffet
- Filter theo danh má»¥c, tráº¡ng thÃ¡i
- Search mÃ³n Äƒn theo tÃªn
- Toast notification cho má»i thao tÃ¡c

#### ğŸ›’ Quáº£n lÃ½ Ä‘Æ¡n hÃ ng

- Táº¡o Ä‘Æ¡n hÃ ng vá»›i giao diá»‡n intuitive
- ThÃªm/bá»›t mÃ³n Äƒn vá»›i validation
- TÃ­nh tá»•ng tiá»n tá»± Ä‘á»™ng
- XÃ¡c nháº­n táº¡o hÃ³a Ä‘Æ¡n
- Loading states vÃ  toast feedback

#### ğŸ§¾ Quáº£n lÃ½ hÃ³a Ä‘Æ¡n

- Danh sÃ¡ch hÃ³a Ä‘Æ¡n vá»›i filter
- Cáº­p nháº­t tráº¡ng thÃ¡i thanh toÃ¡n
- Xuáº¥t hÃ³a Ä‘Æ¡n PDF (future feature)
- Thá»‘ng kÃª theo tráº¡ng thÃ¡i

#### ğŸª‘ Quáº£n lÃ½ bÃ n

- SÆ¡ Ä‘á»“ bÃ n theo khu vá»±c
- Cáº­p nháº­t tráº¡ng thÃ¡i real-time
- Drag & drop Ä‘á»ƒ sáº¯p xáº¿p
- Color coding theo tráº¡ng thÃ¡i

#### ï¿½ Quáº£n lÃ½ khÃ¡ch hÃ ng & nhÃ¢n viÃªn

- CRUD vá»›i form validation
- PhÃ¢n quyá»n theo vai trÃ²
- Search vÃ  pagination
- Export danh sÃ¡ch

### Frontend Architecture

#### State Management

```javascript
// AuthContext.jsx - Global auth state
const AuthContext = createContext();

// Usage trong component
const { user, login, logout } = useContext(AuthContext);
```

#### API Integration

```javascript
// services/api.js - Axios instance
const api = axios.create({
  baseURL: process.env.VITE_API_URL,
  timeout: 10000,
});

// Auto token attachment
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('accessToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Global error handling
api.interceptors.response.use(
  (response) => response,
  (error) => {
    showError(error.response?.data?.message || 'CÃ³ lá»—i xáº£y ra');
    return Promise.reject(error);
  }
);
```

#### Protected Routing

```javascript
// Protected routes theo role
<Route
  path="/admin"
  element={
    <ProtectedRoute roles={['Admin', 'Manager']}>
      <AdminDashboard />
    </ProtectedRoute>
  }
/>
```

## ğŸ”’ PhÃ¢n quyá»n & Security

### Vai trÃ² há»‡ thá»‘ng

- **Admin**: ToÃ n quyá»n há»‡ thá»‘ng (CRUD táº¥t cáº£)
- **Manager**: Quáº£n lÃ½ nhÃ  hÃ ng, xem bÃ¡o cÃ¡o (khÃ´ng quáº£n lÃ½ nhÃ¢n viÃªn)
- **Staff**: NhÃ¢n viÃªn phá»¥c vá»¥ (xá»­ lÃ½ Ä‘áº·t bÃ n, Ä‘Æ¡n hÃ ng)

### Quyá»n chi tiáº¿t

```javascript
// Quyá»n chÃ­nh trong há»‡ thá»‘ng
const permissions = {
  // Booking permissions
  'booking.create': ['Admin', 'Manager', 'Staff'],
  'booking.read': ['Admin', 'Manager', 'Staff'],
  'booking.update': ['Admin', 'Manager', 'Staff'],
  'booking.delete': ['Admin', 'Manager'],

  // Table permissions
  'table.create': ['Admin', 'Manager'],
  'table.read': ['Admin', 'Manager', 'Staff'],
  'table.update': ['Admin', 'Manager'],
  'table.delete': ['Admin', 'Manager'],

  // Menu permissions
  'menu.create': ['Admin', 'Manager'],
  'menu.read': ['Admin', 'Manager', 'Staff'],
  'menu.update': ['Admin', 'Manager'],
  'menu.delete': ['Admin', 'Manager'],

  // Customer permissions
  'customer.create': ['Admin', 'Manager', 'Staff'],
  'customer.read': ['Admin', 'Manager', 'Staff'],
  'customer.update': ['Admin', 'Manager', 'Staff'],
  'customer.delete': ['Admin', 'Manager'],

  // Employee permissions
  'employee.create': ['Admin'],
  'employee.read': ['Admin', 'Manager'],
  'employee.update': ['Admin'],
  'employee.delete': ['Admin'],

  // Order permissions
  'order.create': ['Admin', 'Manager', 'Staff'],
  'order.read': ['Admin', 'Manager', 'Staff'],
  'order.update': ['Admin', 'Manager', 'Staff'],
  'order.delete': ['Admin', 'Manager'],

  // Invoice permissions
  'invoice.read': ['Admin', 'Manager', 'Staff'],
  'invoice.update': ['Admin', 'Manager', 'Staff'],

  // Report permissions
  'report.read': ['Admin', 'Manager'],
};
```

### Security Features

#### Backend Security

- **JWT Authentication**: Access token vá»›i auto-refresh
- **Rate Limiting**: Giá»›i háº¡n API calls (100 requests/15 phÃºt)
- **Input Validation**: Joi schemas cho táº¥t cáº£ endpoints
- **SQL Injection Protection**: Parameterized queries
- **XSS Protection**: Helmet middleware
- **CORS**: Configured cho frontend domain
- **Password Hashing**: bcrypt vá»›i salt rounds
- **Environment Variables**: Sensitive data trong .env

#### Frontend Security

- **Protected Routes**: Role-based routing
- **Token Management**: Auto-refresh, secure storage
- **Input Sanitization**: Form validation trÆ°á»›c khi gá»­i API
- **Error Handling**: KhÃ´ng expose sensitive data
- **HTTPS Ready**: Production configuration

## ğŸ“Š Database Schema

Há»‡ thá»‘ng sá»­ dá»¥ng PostgreSQL vá»›i cÃ¡c báº£ng chÃ­nh:

### Core Tables

- **`vung`** - Khu vá»±c/vÃ¹ng bÃ n (VIP, thÆ°á»ng, ngoÃ i trá»i)
- **`ban`** - BÃ n Äƒn vá»›i sá»‘ gháº¿ vÃ  tráº¡ng thÃ¡i
- **`phieudatban`** - Phiáº¿u Ä‘áº·t bÃ n vá»›i token quáº£n lÃ½
- **`khachhang`** - KhÃ¡ch hÃ ng vÃ  thÃ´ng tin liÃªn há»‡
- **`hangthanhvien`** - Háº¡ng thÃ nh viÃªn vÃ  Æ°u Ä‘Ã£i

### Menu & Orders

- **`danhmucmonan`** - Danh má»¥c mÃ³n Äƒn (khai vá»‹, chÃ­nh, trÃ¡ng miá»‡ng)
- **`monan`** - MÃ³n Äƒn vá»›i giÃ¡ vÃ  hÃ¬nh áº£nh
- **`setbuffet`** - Set buffet vá»›i giÃ¡ theo khung giá»
- **`donhang`** - ÄÆ¡n hÃ ng cá»§a khÃ¡ch
- **`chitietdonhang`** - Chi tiáº¿t mÃ³n Äƒn trong Ä‘Æ¡n hÃ ng

### Invoicing & Payment

- **`hoadon`** - HÃ³a Ä‘Æ¡n thanh toÃ¡n
- **`chitiethoadon`** - Chi tiáº¿t items trong hÃ³a Ä‘Æ¡n
- **`thanhtoan`** - Lá»‹ch sá»­ thanh toÃ¡n

### Staff Management

- **`vai_tro`** - Vai trÃ² nhÃ¢n viÃªn (Admin, Manager, Staff)
- **`quyen`** - Quyá»n háº¡n chi tiáº¿t
- **`vai_tro_quyen`** - Mapping vai trÃ² vÃ  quyá»n
- **`nhanvien`** - NhÃ¢n viÃªn vá»›i thÃ´ng tin vÃ  credentials

### Relationships

```sql
-- Key relationships
phieudatban.makhachhang â†’ khachhang.makhachhang
phieudatban.maban â†’ ban.maban
ban.mavung â†’ vung.mavung
monan.madanhmuc â†’ danhmucmonan.madanhmuc
donhang.maban â†’ ban.maban
chitietdonhang.madonhang â†’ donhang.madonhang
hoadon.madonhang â†’ donhang.madonhang
nhanvien.mavaitro â†’ vai_tro.mavaitro
```

### Indexes & Performance

- Primary keys trÃªn táº¥t cáº£ báº£ng
- Foreign key indexes cho joins
- Search indexes cho tÃªn mÃ³n Äƒn, khÃ¡ch hÃ ng
- Date indexes cho bÃ¡o cÃ¡o theo thá»i gian
- Unique constraints cho username, email, token

## ğŸŒŸ TÃ­nh nÄƒng ná»•i báº­t

### Backend Features

- **Booking Token System**: Má»—i Ä‘áº·t bÃ n cÃ³ token unique cho khÃ¡ch hÃ ng quáº£n lÃ½
- **Optimistic Locking**: Cáº­p nháº­t tráº¡ng thÃ¡i bÃ n vá»›i race condition handling
- **Base Model Pattern**: CRUD operations tÃ¡i sá»­ dá»¥ng cho táº¥t cáº£ models
- **Transaction Support**: Database transactions cho operations phá»©c táº¡p
- **Pagination**: Há»— trá»£ phÃ¢n trang cho táº¥t cáº£ list APIs
- **Search & Filter**: Advanced filtering vá»›i multiple conditions
- **Soft Delete**: Logical delete cho data integrity
- **Audit Trail**: Track created/updated timestamps
- **Role-based Permissions**: Dynamic permission checking

### Frontend Features

- **React 19**: Latest React vá»›i concurrent features
- **Toast Notifications**: User-friendly feedback thay tháº¿ alert()
- **Loading States**: Professional loading experience
- **Form Validation**: Real-time validation vá»›i backend integration
- **Responsive Design**: Mobile-first design approach
- **Chart.js Integration**: Interactive charts cho dashboard
- **Context API**: Global state management
- **Protected Routing**: Role-based access control
- **Optimistic Updates**: UI updates before API confirmation
- **Error Boundaries**: Graceful error handling

### Performance Optimizations

- **Database Connection Pooling**: Efficient DB connections
- **Indexed Queries**: Optimized database queries
- **API Pagination**: Limit data transfer
- **Lazy Loading**: Code splitting cho frontend
- **HTTP Interceptors**: Global request/response handling
- **Caching Strategy**: API response caching
- **Bundle Optimization**: Vite build optimizations

### Developer Experience

- **Hot Module Replacement**: Fast development vá»›i Vite
- **Environment Configuration**: Separate configs cho dev/prod
- **Error Logging**: Comprehensive error logging
- **API Documentation**: Self-documenting API endpoints
- **Code Organization**: Clean architecture patterns
- **Git Hooks**: Pre-commit validation (future)
- **Docker Support**: Containerization ready (future)

### Business Logic

- **Multi-language Support**: Vietnamese/English ready
- **Currency Formatting**: VND formatting vá»›i proper localization
- **Date/Time Handling**: Timezone-aware operations
- **Membership Tiers**: Customer loyalty program
- **Promotion System**: Flexible discount management
- **Reporting Analytics**: Business intelligence dashboards
- **Order Management**: Complete order lifecycle
- **Invoice Tracking**: Payment status management

## ğŸš€ Deployment

### Development Environment

```bash
# Cháº¡y development mode
npm run dev

# Check database connection
node check-data.js

# Test models
node test-models.js

# Initialize database
psql -U postgres -d buffet_restaurant -f scripts/init-data.sql
```

### Production Setup

#### Backend Production

1. **Environment Configuration**

```bash
# .env production settings
NODE_ENV=production
PORT=3000
DB_HOST=your-production-db-host
DB_SSL=true
JWT_SECRET=production-secret-key
```

2. **Database Setup**

```bash
# Create production database
createdb buffet_restaurant_prod

# Run migrations
psql -d buffet_restaurant_prod -f scripts/init-data.sql
```

3. **Process Management**

```bash
# Using PM2
npm install -g pm2
pm2 start server.js --name "buffet-backend"
pm2 save
pm2 startup
```

#### Frontend Production

1. **Build Application**

```bash
cd fe
npm run build
```

2. **Nginx Configuration**

```nginx
# /etc/nginx/sites-available/buffet-restaurant
server {
    listen 80;
    server_name your-domain.com;

    # Frontend static files
    location / {
        root /path/to/buffet/fe/dist;
        try_files $uri $uri/ /index.html;
    }

    # Backend API proxy
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

3. **SSL Certificate**

```bash
# Using Certbot
sudo certbot --nginx -d your-domain.com
```

#### Docker Deployment (Optional)

```dockerfile
# Dockerfile.backend
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
EXPOSE 3000
CMD ["node", "server.js"]
```

```dockerfile
# Dockerfile.frontend
FROM node:18-alpine as builder
WORKDIR /app
COPY fe/package*.json ./
RUN npm ci
COPY fe/ .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  postgres:
    image: postgres:14-alpine
    environment:
      POSTGRES_DB: buffet_restaurant
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./scripts/init-data.sql:/docker-entrypoint-initdb.d/init.sql

  backend:
    build:
      context: .
      dockerfile: Dockerfile.backend
    environment:
      DB_HOST: postgres
      DB_USER: postgres
      DB_PASSWORD: password
      DB_NAME: buffet_restaurant
    depends_on:
      - postgres
    ports:
      - '3000:3000'

  frontend:
    build:
      context: .
      dockerfile: Dockerfile.frontend
    ports:
      - '80:80'
    depends_on:
      - backend

volumes:
  postgres_data:
```

## ğŸ› Troubleshooting

### Common Backend Issues

#### Database Connection Failed

```bash
# Check PostgreSQL service
sudo service postgresql status

# Check database exists
psql -U postgres -l | grep buffet_restaurant

# Test connection manually
psql -U postgres -d buffet_restaurant -c "SELECT NOW();"
```

#### JWT Token Issues

```bash
# Check JWT_SECRET in .env
echo $JWT_SECRET

# Clear invalid tokens
# Frontend: localStorage.removeItem('accessToken')
```

#### API 500 Errors

```bash
# Check server logs
tail -f logs/server.log

# Check database logs
sudo tail -f /var/log/postgresql/postgresql-*.log
```

### Common Frontend Issues

#### CORS Errors

- Äáº£m báº£o backend Ä‘ang cháº¡y trÃªn port 3000
- Kiá»ƒm tra VITE_API_URL trong fe/.env
- Verify CORS configuration trong server.js

#### API Not Found (404)

- Kiá»ƒm tra backend endpoints trong routes/
- Verify API base URL: http://localhost:3000/api
- Check network tab trong DevTools

#### Toast Notifications Not Showing

- Verify ToastContainer trong App.jsx
- Check import cá»§a toast utilities
- Ensure react-toastify styles Ä‘Æ°á»£c import

#### Login Failed

```javascript
// Test vá»›i curl
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

### Performance Issues

#### Slow Database Queries

```sql
-- Enable query logging
SET log_statement = 'all';
SET log_min_duration_statement = 1000;

-- Check slow queries
SELECT query, mean_time, calls
FROM pg_stat_statements
ORDER BY mean_time DESC
LIMIT 10;
```

#### Frontend Bundle Size

```bash
# Analyze bundle size
cd fe
npm run build
npx vite-bundle-analyzer dist/stats.json
```

### Development Debugging

#### Backend Debugging

```javascript
// Add debug logging
console.log('Debug:', {
  user: req.user,
  body: req.body,
  params: req.params,
});

// Use debugger
const result = await Model.create(data);
debugger; // Breakpoint here
```

#### Frontend Debugging

```javascript
// React DevTools
// Install React Developer Tools extension

// Network debugging
// Check Network tab trong DevTools
// Verify request/response data

// State debugging
console.log('Auth context:', { user, token });
```

### Logs & Monitoring

```bash
# Backend logs
tail -f logs/access.log
tail -f logs/error.log

# PM2 logs (production)
pm2 logs buffet-backend
pm2 monit

# System logs
journalctl -u nginx -f
journalctl -u postgresql -f
```

## ğŸ“ˆ Roadmap & Future Features

### Short Term (1-2 months)

- [ ] **Real-time Updates**: WebSocket cho tráº¡ng thÃ¡i bÃ n real-time
- [ ] **PDF Export**: Xuáº¥t hÃ³a Ä‘Æ¡n vÃ  bÃ¡o cÃ¡o PDF
- [ ] **Email Notifications**: Gá»­i email xÃ¡c nháº­n Ä‘áº·t bÃ n
- [ ] **SMS Integration**: SMS notification cho khÃ¡ch hÃ ng
- [ ] **Image Upload**: Upload hÃ¬nh áº£nh mÃ³n Äƒn vá»›i cloud storage

### Medium Term (3-6 months)

- [ ] **Mobile App**: React Native app cho staff vÃ  customers
- [ ] **QR Code Menu**: QR code menu cho bÃ n Äƒn
- [ ] **Online Payment**: VNPay/MoMo integration
- [ ] **Inventory Management**: Quáº£n lÃ½ nguyÃªn liá»‡u vÃ  kho
- [ ] **Staff Scheduling**: Lá»‹ch lÃ m viá»‡c nhÃ¢n viÃªn

### Long Term (6+ months)

- [ ] **Multi-branch**: Há»— trá»£ nhiá»u chi nhÃ¡nh
- [ ] **Loyalty Program**: ChÆ°Æ¡ng trÃ¬nh tÃ­ch Ä‘iá»ƒm nÃ¢ng cao
- [ ] **AI Analytics**: Machine learning cho dá»± Ä‘oÃ¡n doanh thu
- [ ] **Voice Ordering**: Voice interface cho ordering
- [ ] **IoT Integration**: Smart table sensors

### Technical Improvements

- [ ] **E2E Testing**: Cypress/Playwright testing
- [ ] **CI/CD Pipeline**: GitHub Actions deployment
- [ ] **Microservices**: Service-oriented architecture
- [ ] **Redis Caching**: Performance optimization
- [ ] **GraphQL API**: Alternative to REST APIs
- [ ] **TypeScript**: Type safety cho codebase

## ğŸ¤ Contributing

### Getting Started

1. Fork dá»± Ã¡n trÃªn GitHub
2. Clone fork vá» local machine
3. Táº¡o feature branch tá»« main
4. Implement feature vá»›i tests
5. Submit Pull Request vá»›i description chi tiáº¿t

### Development Guidelines

```bash
# Setup development environment
git clone https://github.com/yourusername/buffet-restaurant
cd buffet-restaurant

# Install dependencies
npm install
cd fe && npm install && cd ..

# Create feature branch
git checkout -b feature/your-feature-name

# Make changes and test
npm run test
cd fe && npm run test && cd ..

# Commit with meaningful message
git commit -m "feat: add order management functionality"

# Push and create PR
git push origin feature/your-feature-name
```

### Code Standards

- **Backend**: Node.js best practices, async/await, proper error handling
- **Frontend**: React best practices, functional components, hooks
- **Database**: PostgreSQL naming conventions, proper indexing
- **API**: RESTful design, consistent response format
- **Security**: Input validation, authentication, authorization
- **Documentation**: Code comments, API documentation, README updates

### Development Team

- **Backend Developer**: API design, database architecture, security implementation
- **Frontend Developer**: React UI/UX, state management, responsive design
- **DevOps Engineer**: Deployment, monitoring, performance optimization
- **UI/UX Designer**: Interface design, user experience, accessibility

### Technologies & Libraries

- **Backend**: Express.js, PostgreSQL, JWT, Joi validation, Helmet security
- **Frontend**: React 19, Vite, Chart.js, React Toastify, SCSS, Axios
- **Development**: Node.js, npm, Git, VS Code, Postman
- **Deployment**: Nginx, PM2, Docker, PostgreSQL
